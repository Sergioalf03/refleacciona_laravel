"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4773],{4773:(T,g,n)=>{n.r(g),n.d(g,{AuditoryListPageModule:()=>U});var u=n(6895),s=n(7002),c=n(1433),h=n(655),t=n(8256),m=n(1032),p=n(2414),f=n(3269),v=n(6280),y=n(6769);function A(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"div",4)(1,"h4",5),t._uU(2,"Sin auditor\xedas"),t.qZA(),t.TgZ(3,"ion-button",6),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onNewAuditory())}),t._uU(4,"Iniciar una nueva"),t.qZA()()}}function x(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const i=t.oxw().$implicit;t.xp6(1),t.hij("Fecha: ",i.date,"")}}function L(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"ion-item",7)(1,"ion-label")(2,"h2",8),t._uU(3),t.qZA(),t.YNc(4,x,2,1,"p",9),t.TgZ(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-button",10),t.NdJ("click",function(){const l=t.CHM(i).$implicit,d=t.oxw();return t.KtG(d.presentActionSheetOptions(l.id))}),t._UZ(8,"ion-icon",11),t.qZA()()}if(2&e){const i=r.$implicit;t.xp6(3),t.hij("T\xedtulo: ",i.title,""),t.xp6(1),t.Q6J("ngIf",i.date),t.xp6(2),t.hij("Estado: ",i.statusWord,"")}}const S=[{path:"",component:(()=>{class e{constructor(i,o,a,l,d,E){this.auditoryService=i,this.responseService=o,this.databaseService=a,this.router=l,this.confirmDialogService=d,this.actionSheetCtrl=E,this.auditories=[],this.loading=!1}ngOnInit(){}ionViewWillEnter(){return(0,h.mG)(this,void 0,void 0,function*(){this.loading=!0,this.auditoryService.getLocalList().subscribe({next:i=>{console.log(i),"waiting"!==i&&(this.auditories=i.values.map(o=>Object.assign(Object.assign({},o),{statusWord:1===o.status?"En progreso":"Terminada"})),this.loading=!1)},error:i=>{this.responseService.onError(i,"No se pudieron recuperar las auditor\xedas"),this.loading=!1}})})}onGoingHome(){this.router.navigateByUrl("/home")}onEdit(i){this.router.navigateByUrl(`/auditory-form/${i}`)}onEditAnswers(i){this.router.navigateByUrl(`/question-form/${i}/1`)}onFinish(i){this.router.navigateByUrl(`/auditory-finish-form/${i}`)}onNewAuditory(){this.router.navigateByUrl("/auditory-form/00")}onDelete(i){this.confirmDialogService.presentAlert("\xbfDesea eliminar la auditor\xeda?",()=>{this.loading=!0,this.auditoryService.deleteLocal(i).subscribe({next:o=>{"waiting"!==o&&(this.loading=!1,this.responseService.onSuccess("Auditor\xeda eliminada"),this.ionViewWillEnter())},error:o=>{this.responseService.onError(o,"No se pudo eliminar la auditor\xeda"),this.loading=!1}})})}presentActionSheetOptions(i){return(0,h.mG)(this,void 0,void 0,function*(){console.log(i),yield(yield this.actionSheetCtrl.create({header:"Opciones",mode:"ios",buttons:[{text:"Actualizar Auditor\xeda",handler:()=>this.onEdit(i)},{text:"Actualizar Respuestas",handler:()=>this.onEditAnswers(i)},{text:"Eliminar Auditor\xeda",role:"destructive",handler:()=>this.onDelete(i)},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}]})).present()})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.P),t.Y36(p.J),t.Y36(f.k),t.Y36(c.F0),t.Y36(v.D),t.Y36(s.BX))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auditory-list"]],decls:7,vars:4,consts:[[3,"addUrl","backUrl"],[1,"mx-2","mt-2"],["class","text-center",4,"ngIf"],["class","mt-2 txtInput",4,"ngFor","ngForOf"],[1,"text-center"],[1,"mt-2"],[3,"click"],[1,"mt-2","txtInput"],[1,"text-start"],[4,"ngIf"],["slot","end","size","small",3,"click"],["slot","icon-only","name","menu"]],template:function(i,o){1&i&&(t.TgZ(0,"ion-content"),t._UZ(1,"app-header-buttons",0),t.TgZ(2,"div",1)(3,"h1"),t._uU(4,"Auditor\xedas"),t.qZA(),t.YNc(5,A,5,0,"div",2),t.YNc(6,L,9,3,"ion-item",3),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("addUrl","auditory-form/00")("backUrl","/home"),t.xp6(4),t.Q6J("ngIf",0===o.auditories.length),t.xp6(1),t.Q6J("ngForOf",o.auditories))},dependencies:[u.sg,u.O5,s.YG,s.W2,s.gu,s.Ie,s.Q$,y.$],encapsulation:2}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(S),c.Bz]}),e})();var Z=n(1576);let U=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,s.Pc,P,Z.Y]}),e})()}}]);