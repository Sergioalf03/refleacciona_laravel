"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1084],{6769:(T,v,o)=>{o.d(v,{$:()=>f});var n=o(8256),_=o(1433),a=o(6895),m=o(4731);function l(t,g){if(1&t){const r=n.EpF();n.TgZ(0,"div",3)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(r);const h=n.oxw();return n.KtG(h.onGoingBack())}),n._UZ(2,"ion-icon",5),n.qZA()()}}function C(t,g){if(1&t){const r=n.EpF();n.TgZ(0,"div",6)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(r);const h=n.oxw();return n.KtG(h.onGoingHome())}),n._UZ(2,"ion-icon",7),n.qZA()()}}function d(t,g){if(1&t){const r=n.EpF();n.TgZ(0,"div",6)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(r);const h=n.oxw();return n.KtG(h.customButton.click())}),n._UZ(2,"ion-icon",8),n.qZA()()}if(2&t){const r=n.oxw();n.xp6(2),n.Q6J("name",r.customButton.icon)}}let f=(()=>{class t{constructor(r){this.router=r}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return t.\u0275fac=function(r){return new(r||t)(n.Y36(_.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(r,u){1&r&&(n.TgZ(0,"div",0),n.YNc(1,l,3,0,"div",1),n.YNc(2,C,3,0,"div",2),n.YNc(3,d,3,1,"div",2),n.qZA()),2&r&&(n.xp6(1),n.Q6J("ngIf",u.backUrl),n.xp6(1),n.Q6J("ngIf",u.homeUrl),n.xp6(1),n.Q6J("ngIf",u.customButton))},dependencies:[a.O5,m.YG,m.gu],encapsulation:2}),t})()},1576:(T,v,o)=>{o.d(v,{Y:()=>m});var n=o(6895),_=o(4731),a=o(8256);let m=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=a.oAB({type:l}),l.\u0275inj=a.cJS({imports:[n.ez,_.Pc]}),l})()},1084:(T,v,o)=>{o.r(v),o.d(v,{GeneralCountCountListPageModule:()=>O});var n=o(6895),_=o(433),a=o(4731),m=o(655),l=o(6551),C=o(313),d=o(7368),f=o(6764),t=o(8256),g=o(3216),r=o(2424),u=o(1433),h=o(2414),E=o(6280),y=o(6769);function P(s,p){if(1&s){const e=t.EpF();t.TgZ(0,"div",6)(1,"h4",7),t._uU(2,"Sin Conteos"),t.qZA(),t.TgZ(3,"ion-button",8),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onNewCount())}),t._uU(4,"Iniciar uno"),t.qZA()()}}function Z(s,p){if(1&s){const e=t.EpF();t.TgZ(0,"ion-item",9)(1,"ion-label")(2,"h2",10),t._uU(3),t._UZ(4,"ion-icon",11),t._uU(5),t._UZ(6,"span",12),t.qZA()(),t.TgZ(7,"ion-button",13),t.NdJ("click",function(){const x=t.CHM(e).$implicit,B=t.oxw();return t.KtG(B.presentActionSheetOptions(x))}),t._UZ(8,"ion-icon",14),t.qZA()()}if(2&s){const e=p.$implicit;t.xp6(3),t.AsE("",e.vehicleTypeText,": ",e.originText," "),t.xp6(2),t.hij(" ",e.destinationText," ")}}const U=l.m,L=f.p;let M=(()=>{class s{constructor(e,i,c,x,B,A,H){this.generalCountCollectionService=e,this.actionSheetCtrl=i,this.loadingSerivice=c,this.router=x,this.activatedRoute=B,this.responseService=A,this.confirmDialog=H,this.customButton={click:()=>(0,m.mG)(this,void 0,void 0,function*(){return this.router.navigateByUrl((0,d.H7)(this.auditoryId))}),icon:"add"},this.backUrl=(0,d.QY)("1","0"),this.counts=[],this.loading=!0,this.auditoryId="0"}ngOnInit(){}ionViewDidEnter(){this.activatedRoute.paramMap.subscribe({next:e=>{this.loadingSerivice.showLoading(),this.loading=!0,this.auditoryId=e.get("id")||"0",this.backUrl=(0,d.QY)("1",this.auditoryId),this.loadList()}}).unsubscribe()}loadList(){this.generalCountCollectionService.getList(this.auditoryId).subscribe({next:e=>{e!==C.W&&(this.counts=e.values.map(i=>Object.assign({originText:U.find(c=>+c.id==+i.origin).short,destinationText:U.find(c=>+c.id==+i.destination).short,vehicleTypeText:L.find(c=>+c.id==+i.vehicle_type).text},i)),this.loading=!1,this.loadingSerivice.dismissLoading())},error:e=>{this.responseService.onError(e,"No se pudo guardar el conteo")}})}presentActionSheetOptions(e){return(0,m.mG)(this,void 0,void 0,function*(){const i=[{text:"Eliminar",role:"destructive",handler:()=>this.onDelete(e.id)},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}];yield(yield this.actionSheetCtrl.create({header:"Opciones",mode:"ios",buttons:i})).present()})}onDelete(e){this.confirmDialog.presentAlert("\xbfDesea eliminar el conteo?",()=>{this.loadingSerivice.showLoading(),this.generalCountCollectionService.delete(e).subscribe({next:i=>{i!==C.W&&this.loadList()},error:i=>{this.responseService.onError(i,"No se pudo guardar el conteo")}})})}onNewCount(){this.router.navigateByUrl((0,d.H7)(this.auditoryId))}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(g.P),t.Y36(a.BX),t.Y36(r.b),t.Y36(u.F0),t.Y36(u.gz),t.Y36(h.J),t.Y36(E.D))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-general-count-count-list"]],decls:10,vars:4,consts:[[3,"backUrl","customButton"],[1,"mx-2","mt-4"],["class","text-center",4,"ngIf"],[1,"row"],[1,"col-12","p-4"],["class","mt-2 txtInput ion-no-padding ion-no-margin",4,"ngFor","ngForOf"],[1,"text-center"],[1,"mt-2"],[3,"click"],[1,"mt-2","txtInput","ion-no-padding","ion-no-margin"],[1,"text-start","ps-2"],["name","arrow-forward"],[1,"mx-1"],["slot","end","size","small",3,"click"],["slot","icon-only","name","menu"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content"),t._UZ(1,"app-header-buttons",0),t.TgZ(2,"div",1)(3,"h1"),t._uU(4,"Listado de registros"),t.qZA()(),t._UZ(5,"div",1),t.YNc(6,P,5,0,"div",2),t.TgZ(7,"div",3)(8,"div",4),t.YNc(9,Z,9,3,"ion-item",5),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("backUrl",i.backUrl)("customButton",i.customButton),t.xp6(5),t.Q6J("ngIf",!i.loading&&0===i.counts.length),t.xp6(3),t.Q6J("ngForOf",i.counts))},dependencies:[n.sg,n.O5,a.YG,a.W2,a.gu,a.Ie,a.Q$,y.$],encapsulation:2}),s})();var I=o(1576);const G=[{path:"",component:M}];let O=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[n.ez,_.u5,a.Pc,u.Bz.forChild(G),I.Y]}),s})()}}]);