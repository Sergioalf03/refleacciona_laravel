"use strict";(self.webpackChunkCallesMasSeguras=self.webpackChunkCallesMasSeguras||[]).push([[174],{9174:(v,l,t)=>{t.r(l),t.d(l,{AuditoryModule:()=>C});var c=t(6814),h=t(5619),e=t(9212),u=t(5412),n=t(677),g=t(2634),i=t(595),d=t(594),m=t(6138);let f=(()=>{class s{constructor(r,a,o,p,D){this.auditoryService=r,this.responseService=a,this.loadingService=o,this.dateFormatService=p,this.router=D,this.tableRequestBody={page_size:10,page_index:0,order_column:"date",order_direction:"desc",search_key:"",conditions:[]},this.downloadRows=[],this.tableConfig={fullWidth:!0,conditionSelectors:[],headerButtons:[],tableOptions:[],columns:[{class:"",text:"T\xedtulo",key:"title"},{class:"",text:"Descripci\xf3n",key:"description"},{class:"",text:"Fecha",key:"date"},{class:"",text:"Usuario",key:"user"}],rowClick:S=>this.router.navigateByUrl(`/app/auditory/detail/${S.id}`)},this.breadCrumbData={title:"Listado de auditor\xedas",items:[{label:"Auditor\xeda",active:!0},{label:"Listado",active:!0}]},this.listDataFetched=new h.X(void 0),this.initialLoading=!0,this.loading=!1,this.loadingClount=0,this.getListObservable=this.listDataFetched.asObservable()}ngOnInit(){this.getList()}ngOnDestroy(){this.modalSubscription&&this.modalSubscription.unsubscribe()}getList(){this.loadingService.show(),this.auditoryService.getList(this.tableRequestBody).subscribe({next:r=>{const a={rows:r.data.list.map(o=>({...o,date:this.dateFormatService.toShowFormat(`${o.date}T00:00:00.000Z`)})),total:r.data.total};this.downloadRows=a.rows,this.listDataFetched.next(a)},error:r=>this.responseService.onError(r,"No se pudo recuperar la lista")})}static#t=this.\u0275fac=function(a){return new(a||s)(e.Y36(u.P),e.Y36(n.J),e.Y36(g.b),e.Y36(i.f),e.Y36(d.F0))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-auditory"]],decls:3,vars:4,consts:[[1,"row"],[1,"col-xl-8","offset-xl-2"],[3,"tableConfig","tableRequestBody","breadCrumbData","listDataFetched","fetchList"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-generic-table",2),e.NdJ("fetchList",function(){return o.getList()}),e.qZA()()()),2&a&&(e.xp6(2),e.Q6J("tableConfig",o.tableConfig)("tableRequestBody",o.tableRequestBody)("breadCrumbData",o.breadCrumbData)("listDataFetched",o.listDataFetched))},dependencies:[m.p],encapsulation:2})}return s})();var y=t(7090);const b=[{path:"",component:f},{path:"detail/:id",loadChildren:()=>Promise.all([t.e(342),t.e(11)]).then(t.bind(t,8011)).then(s=>s.AuditoryDetailModule)}];let C=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=e.oAB({type:s});static#s=this.\u0275inj=e.cJS({imports:[c.ez,d.Bz.forChild(b),y.G,d.Bz]})}return s})()},5412:(v,l,t)=>{t.d(l,{P:()=>u});var c=t(9212),h=t(4654);const e="w-auditory";let u=(()=>{class n{constructor(i){this.http=i}getList(i){return this.http.post(`${e}/list`,i)}getDetail(i){return this.http.get(`${e}/detail/${i}`)}downloadPdf(i){return this.http.downloadGet(`${e}/pdf/${i}`)}static#t=this.\u0275fac=function(d){return new(d||n)(c.LFG(h.g))};static#e=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);