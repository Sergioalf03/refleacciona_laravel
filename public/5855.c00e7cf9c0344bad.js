"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5855],{1576:(v,l,i)=>{i.d(l,{Y:()=>m});var c=i(6895),d=i(4731),s=i(8256);let m=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275mod=s.oAB({type:u}),u.\u0275inj=s.cJS({imports:[c.ez,d.Pc]}),u})()},5855:(v,l,i)=>{i.r(l),i.d(l,{GeneralCountAuditoryDetailPageModule:()=>Y});var c=i(6895),d=i(433),s=i(4731),m=i(655),h=(i(6551),i(7368)),y=(i(6764),i(2340)),t=i(8256),A=i(2342),Z=i(2424),f=i(2414),T=i(3916),g=i(1433),D=i(6280),x=i(4372),U=i(1006);function C(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"ion-content")(1,"ion-list",12)(2,"ion-item",13),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.downloadPdf())}),t.TgZ(3,"ion-label"),t._uU(4,"Descargar PDF"),t.qZA()(),t.TgZ(5,"ion-item",13),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.downloadCsv())}),t.TgZ(6,"ion-label"),t._uU(7,"Descargar CSV"),t.qZA()()()()}}function E(n,a){if(1&n&&(t.TgZ(0,"p",14)(1,"strong"),t._uU(2,"Fecha:"),t.qZA(),t._uU(3),t.qZA()),2&n){const o=t.oxw();t.xp6(3),t.AsE(" ",o.auditoryDate," ",o.auditoryTime,"")}}function S(n,a){if(1&n&&(t.TgZ(0,"p")(1,"strong"),t._uU(2,"Descripci\xf3n:"),t.qZA(),t._uU(3),t.qZA()),2&n){const o=t.oxw();t.xp6(3),t.hij(" ",o.auditoryDescription,"")}}function P(n,a){1&n&&t._UZ(0,"img",17),2&n&&t.Q6J("src",a.$implicit,t.LSH)}function $(n,a){if(1&n&&(t.TgZ(0,"p")(1,"strong",15),t._uU(2,"Fotograf\xedas del entorno:"),t.qZA(),t.YNc(3,P,1,1,"img",16),t.qZA()),2&n){const o=t.oxw();t.xp6(3),t.Q6J("ngForOf",o.auditoyrEvidences)}}function b(n,a){if(1&n&&(t.TgZ(0,"div",18)(1,"div",19)(2,"ion-item",20)(3,"ion-label")(4,"h2",21),t._uU(5),t.qZA()()(),t.TgZ(6,"ion-item",20)(7,"ion-label")(8,"h2",21),t._uU(9),t.qZA()()(),t.TgZ(10,"ion-item",20)(11,"ion-label")(12,"h2",21),t._uU(13),t.qZA()()(),t.TgZ(14,"ion-item",20)(15,"ion-label")(16,"h2",21),t._uU(17),t.qZA()()(),t.TgZ(18,"ion-item",20)(19,"ion-label")(20,"h2",21),t._uU(21),t.qZA()()(),t.TgZ(22,"ion-item",20)(23,"ion-label")(24,"h2",21),t._uU(25),t.qZA()()(),t.TgZ(26,"ion-item",20)(27,"ion-label")(28,"h2",21),t._uU(29),t.qZA()()(),t.TgZ(30,"ion-item",20)(31,"ion-label")(32,"h2",21),t._uU(33),t.qZA()()(),t.TgZ(34,"ion-item",20)(35,"ion-label")(36,"h2",21),t._uU(37),t.qZA()()(),t.TgZ(38,"ion-item",20)(39,"ion-label")(40,"h2",21),t._uU(41),t.qZA()()(),t.TgZ(42,"ion-item",20)(43,"ion-label")(44,"h2",21),t._uU(45),t.qZA()()(),t.TgZ(46,"ion-item",20)(47,"ion-label")(48,"h2",21),t._uU(49),t.qZA()()()()()),2&n){const o=t.oxw();t.xp6(5),t.AsE("",o.names[0],": ",o.counts[0].count1," "),t.xp6(4),t.AsE("",o.names[1],": ",o.counts[0].count2," "),t.xp6(4),t.AsE("",o.names[2],": ",o.counts[0].count3," "),t.xp6(4),t.AsE("",o.names[3],": ",o.counts[0].count4," "),t.xp6(4),t.AsE("",o.names[4],": ",o.counts[0].count5," "),t.xp6(4),t.AsE("",o.names[5],": ",o.counts[0].count6," "),t.xp6(4),t.AsE("",o.names[6],": ",o.counts[0].count7," "),t.xp6(4),t.AsE("",o.names[7],": ",o.counts[0].count8," "),t.xp6(4),t.AsE("",o.names[8],": ",o.counts[0].count9," "),t.xp6(4),t.AsE("",o.names[9],": ",o.counts[0].count10," "),t.xp6(4),t.AsE("",o.names[10],": ",o.counts[0].count11," "),t.xp6(4),t.AsE("",o.names[11],": ",o.counts[0].count12," ")}}let G=(()=>{class n{constructor(o,e,r,M,F,L,N,J){this.auditoryService=o,this.loadingService=e,this.responseService=r,this.mapService=M,this.route=F,this.router=L,this.confirmDialogService=N,this.platformDownloadService=J,this.backUrl=(0,h.nH)("remote"),this.names=["Urbano","Sed\xe1n","Berlina","Hatchback","Cup\xe9","Descapotable","Deportivo","Todoterreno","Monovolumen","SUV","Furgoneta","Pickup"],this.auditoryId="0",this.auditoryTitle="",this.auditoryDate="",this.auditoryTime="",this.auditoryDescription="",this.auditoryCloseNote="",this.auditoryLat="",this.auditoryLng="",this.yesScore=0,this.notScore=0,this.auditoyrEvidences=[],this.auditorySections=[],this.counts=[]}ionViewWillEnter(){this.route.paramMap.subscribe({next:o=>{o.has("id")?(this.loadingService.showLoading(),this.auditoryId=o.get("id")||"0",this.auditoryService.getRemoteDetail(this.auditoryId).subscribe({next:e=>{this.setAuditory(e.data)},error:e=>this.responseService.onError(e,"No se pudo recuperar la auditor\xeda")})):this.router.navigateByUrl(this.backUrl)}}).unsubscribe()}setAuditory(o){this.auditoryTitle=o.title,this.auditoryDate=o.date,this.auditoryTime=o.time,this.auditoryDescription=o.description,this.auditoryCloseNote=o.close_note,this.auditoryLat=o.lat,this.auditoryLng=o.lng,this.auditoyrEvidences=o.evidences.map(e=>`${y.T0}/general/${e.dir}.jpeg`),this.counts=o.counts,this.mapService.setCenter(+this.auditoryLat,+this.auditoryLng,!0),setTimeout(()=>{this.loadingService.dismissLoading()},500)}downloadCsv(){this.confirmDialogService.presentAlert("\xbfDesea descargar en formato CSV?",()=>{const r=new Blob([`Tipo,conteo\n${this.names[0]},${this.counts[0].count1}\n${this.names[1]},${this.counts[0].count2}\n${this.names[2]},${this.counts[0].count3}\n${this.names[3]},${this.counts[0].count4}\n${this.names[4]},${this.counts[0].count5}\n${this.names[5]},${this.counts[0].count6}\n${this.names[6]},${this.counts[0].count7}\n${this.names[7]},${this.counts[0].count8}\n${this.names[8]},${this.counts[0].count9}\n${this.names[9]},${this.counts[0].count10}\n${this.names[10]},${this.counts[0].count11}\n${this.names[11]},${this.counts[0].count12}`],{type:"text/csv"});this.platformDownloadService.downloadBlob(r,this.auditoryTitle,"csv")})}downloadPdf(){this.confirmDialogService.presentAlert("\xbfDesea descargar en formato PDF?",()=>{this.loadingService.showLoading(),this.auditoryService.downloadPdf(this.auditoryId).subscribe({next:o=>(0,m.mG)(this,void 0,void 0,function*(){return this.platformDownloadService.downloadBlob(o,this.auditoryTitle,"pdf")}),error:o=>this.responseService.onError(o,"No se pudo descargar el archivo")})})}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(A.B),t.Y36(Z.b),t.Y36(f.J),t.Y36(T.S),t.Y36(g.gz),t.Y36(g.F0),t.Y36(D.D),t.Y36(x.A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-count-auditory-detail"]],decls:21,vars:6,consts:[[1,"row","mt-2","mx-0"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["id","c1","size","small"],["slot","icon-only","name","cloud-download"],["trigger","c1","triggerAction","click",3,"dismissOnSelect"],[1,"mx-2","mt-4"],["class","mt-4",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],["lines","none"],["button","",3,"click"],[1,"mt-4"],[1,"mt-2"],["width","100%","class","mb-2",3,"src",4,"ngFor","ngForOf"],["width","100%",1,"mb-2",3,"src"],[1,"row"],[1,"col-12","p-4"],[1,"mt-2","txtInput","ion-no-padding","ion-no-margin"],[1,"text-start","ps-2"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"ion-button",2),t.NdJ("click",function(){return e.onGoingBack()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"div",4)(6,"ion-button",5),t._UZ(7,"ion-icon",6),t.qZA(),t.TgZ(8,"ion-popover",7),t.YNc(9,C,8,0,"ng-template"),t.qZA()()(),t.TgZ(10,"div",8)(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,E,4,2,"p",9),t.YNc(14,S,4,1,"p",10),t.TgZ(15,"p")(16,"strong"),t._uU(17,"Ubicaci\xf3n:"),t.qZA(),t._UZ(18,"app-map"),t.qZA(),t.YNc(19,$,4,1,"p",10),t.YNc(20,b,50,24,"div",11),t.qZA()()),2&o&&(t.xp6(8),t.Q6J("dismissOnSelect",!0),t.xp6(4),t.Oqu(e.auditoryTitle),t.xp6(1),t.Q6J("ngIf",e.auditoryDate),t.xp6(1),t.Q6J("ngIf",e.auditoryDescription),t.xp6(5),t.Q6J("ngIf",e.auditoyrEvidences.length>0),t.xp6(1),t.Q6J("ngIf",e.counts[0]))},dependencies:[c.sg,c.O5,s.YG,s.W2,s.gu,s.Ie,s.Q$,s.q_,s.d8,U.G],encapsulation:2}),n})();var _=i(1576),I=i(3375);const B=[{path:"",component:G}];let Y=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,d.u5,s.Pc,g.Bz.forChild(B),_.Y,I.R]}),n})()}}]);