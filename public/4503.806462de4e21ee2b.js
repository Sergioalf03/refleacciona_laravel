"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4503],{6769:(U,v,e)=>{e.d(v,{$:()=>C});var n=e(8256),f=e(1433),r=e(6895),m=e(4731);function l(t,h){if(1&t){const c=n.EpF();n.TgZ(0,"div",3)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(c);const g=n.oxw();return n.KtG(g.onGoingBack())}),n._UZ(2,"ion-icon",5),n.qZA()()}}function _(t,h){if(1&t){const c=n.EpF();n.TgZ(0,"div",6)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(c);const g=n.oxw();return n.KtG(g.onGoingHome())}),n._UZ(2,"ion-icon",7),n.qZA()()}}function d(t,h){if(1&t){const c=n.EpF();n.TgZ(0,"div",6)(1,"ion-button",4),n.NdJ("click",function(){n.CHM(c);const g=n.oxw();return n.KtG(g.customButton.click())}),n._UZ(2,"ion-icon",8),n.qZA()()}if(2&t){const c=n.oxw();n.xp6(2),n.Q6J("name",c.customButton.icon)}}let C=(()=>{class t{constructor(c){this.router=c}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return t.\u0275fac=function(c){return new(c||t)(n.Y36(f.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(c,u){1&c&&(n.TgZ(0,"div",0),n.YNc(1,l,3,0,"div",1),n.YNc(2,_,3,0,"div",2),n.YNc(3,d,3,1,"div",2),n.qZA()),2&c&&(n.xp6(1),n.Q6J("ngIf",u.backUrl),n.xp6(1),n.Q6J("ngIf",u.homeUrl),n.xp6(1),n.Q6J("ngIf",u.customButton))},dependencies:[r.O5,m.YG,m.gu],encapsulation:2}),t})()},1576:(U,v,e)=>{e.d(v,{Y:()=>m});var n=e(6895),f=e(4731),r=e(8256);let m=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=r.oAB({type:l}),l.\u0275inj=r.cJS({imports:[n.ez,f.Pc]}),l})()},4503:(U,v,e)=>{e.r(v),e.d(v,{BeltCountListPageModule:()=>O});var n=e(6895),f=e(433),r=e(4731),m=e(655),l=e(6551),_=e(313),d=e(7368),C=e(6764),t=e(8256),h=e(3863),c=e(2424),u=e(1433),g=e(2414),Z=e(6280),E=e(6769);function y(s,p){if(1&s){const o=t.EpF();t.TgZ(0,"div",6)(1,"h4",7),t._uU(2,"Sin Conteos"),t.qZA(),t.TgZ(3,"ion-button",8),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.onNewCount())}),t._uU(4,"Iniciar uno"),t.qZA()()}}function P(s,p){if(1&s){const o=t.EpF();t.TgZ(0,"ion-item",9)(1,"ion-label")(2,"h2",10),t._uU(3),t._UZ(4,"ion-icon",11),t._uU(5),t._UZ(6,"span",12),t._uU(7),t._UZ(8,"span",12),t._uU(9),t.qZA(),t.TgZ(10,"h2",10),t._uU(11),t._UZ(12,"span",12),t._uU(13),t.qZA()(),t.TgZ(14,"ion-button",13),t.NdJ("click",function(){const B=t.CHM(o).$implicit,x=t.oxw();return t.KtG(x.presentActionSheetOptions(B))}),t._UZ(15,"ion-icon",14),t.qZA()()}if(2&s){const o=p.$implicit;t.xp6(3),t.hij("",o.originText," "),t.xp6(2),t.hij(" ",o.destinationText," "),t.xp6(2),t.hij(" ",o.adults_count," UC, "),t.xp6(2),t.hij(" ",o.belts_count," C "),t.xp6(2),t.lnq("",o.vehicleTypeText,": ",o.overuse_count," UCOM ",o.child_count," US, "),t.xp6(2),t.hij(" ",o.chairs_count," S ")}}const T=l.m,M=C.p;let L=(()=>{class s{constructor(o,i,a,B,x,A,D){this.beltCollectionService=o,this.actionSheetCtrl=i,this.loadingSerivice=a,this.router=B,this.activatedRoute=x,this.responseService=A,this.confirmDialog=D,this.customButton={click:()=>(0,m.mG)(this,void 0,void 0,function*(){return this.router.navigateByUrl((0,d.KC)(this.auditoryId))}),icon:"add"},this.backUrl=(0,d.hD)("1","0"),this.counts=[],this.loading=!0,this.auditoryId="0"}ngOnInit(){}ionViewDidEnter(){this.activatedRoute.paramMap.subscribe({next:o=>{this.loadingSerivice.showLoading(),this.loading=!0,this.auditoryId=o.get("id")||"0",this.backUrl=(0,d.hD)("1",this.auditoryId),this.loadList()}}).unsubscribe()}loadList(){this.beltCollectionService.getList(this.auditoryId).subscribe({next:o=>{o!==_.W&&(this.counts=o.values.map(i=>Object.assign({originText:T.find(a=>+a.id==+i.origin).short,destinationText:T.find(a=>+a.id==+i.destination).short,vehicleTypeText:M.find(a=>+a.id==+i.vehicle_type).text},i)),this.loading=!1,this.loadingSerivice.dismissLoading())},error:o=>{this.responseService.onError(o,"No se pudo guardar el conteo")}})}presentActionSheetOptions(o){return(0,m.mG)(this,void 0,void 0,function*(){const i=[{text:"Eliminar",role:"destructive",handler:()=>this.onDelete(o.id)},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}];yield(yield this.actionSheetCtrl.create({header:"Opciones",mode:"ios",buttons:i})).present()})}onDelete(o){this.confirmDialog.presentAlert("\xbfDesea eliminar el conteo?",()=>{this.loadingSerivice.showLoading(),this.beltCollectionService.delete(o).subscribe({next:i=>{i!==_.W&&this.loadList()},error:i=>{this.responseService.onError(i,"No se pudo guardar el conteo")}})})}onNewCount(){this.router.navigateByUrl((0,d.KC)(this.auditoryId))}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(h.P),t.Y36(r.BX),t.Y36(c.b),t.Y36(u.F0),t.Y36(u.gz),t.Y36(g.J),t.Y36(Z.D))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-belt-count-list"]],decls:10,vars:4,consts:[[3,"backUrl","customButton"],[1,"mx-2","mt-4"],["class","text-center",4,"ngIf"],[1,"row"],[1,"col-12","p-4"],["class","mt-2 txtInput ion-no-padding ion-no-margin",4,"ngFor","ngForOf"],[1,"text-center"],[1,"mt-2"],[3,"click"],[1,"mt-2","txtInput","ion-no-padding","ion-no-margin"],[1,"text-start","ps-2"],["name","arrow-forward"],[1,"mx-1"],["slot","end","size","small",3,"click"],["slot","icon-only","name","menu"]],template:function(o,i){1&o&&(t.TgZ(0,"ion-content"),t._UZ(1,"app-header-buttons",0),t.TgZ(2,"div",1)(3,"h1"),t._uU(4,"Listado de registros"),t.qZA()(),t._UZ(5,"div",1),t.YNc(6,y,5,0,"div",2),t.TgZ(7,"div",3)(8,"div",4),t.YNc(9,P,16,8,"ion-item",5),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("backUrl",i.backUrl)("customButton",i.customButton),t.xp6(5),t.Q6J("ngIf",!i.loading&&0===i.counts.length),t.xp6(3),t.Q6J("ngForOf",i.counts))},dependencies:[n.sg,n.O5,r.YG,r.W2,r.gu,r.Ie,r.Q$,E.$],encapsulation:2}),s})();var I=e(1576);const b=[{path:"",component:L}];let O=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[n.ez,f.u5,r.Pc,u.Bz.forChild(b),I.Y]}),s})()}}]);