"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6362],{76:(m,E,o)=>{o.d(E,{GW:()=>u,dk:()=>l,oK:()=>e});var e=(()=>{return(c=e||(e={})).Prompt="PROMPT",c.Camera="CAMERA",c.Photos="PHOTOS",e;var c})(),u=(()=>{return(c=u||(u={})).Rear="REAR",c.Front="FRONT",u;var c})(),l=(()=>{return(c=l||(l={})).Uri="uri",c.Base64="base64",c.DataUrl="dataUrl",l;var c})()},1443:(m,E,o)=>{o.d(E,{ez:()=>u,tP:()=>e});var e=(()=>{return(t=e||(e={})).Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",e;var t})(),u=(()=>{return(t=u||(u={})).UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16",u;var t})()},1067:(m,E,o)=>{o.d(E,{ez:()=>u.ez,fy:()=>l,tP:()=>u.tP});var e=o(7423),u=o(1443);const l=(0,e.fo)("Filesystem",{web:()=>o.e(6364).then(o.bind(o,6364)).then(c=>new c.FilesystemWeb)})},6769:(m,E,o)=>{o.d(E,{$:()=>v});var e=o(8256),u=o(1433),l=o(6895),c=o(4731);function t(a,n){if(1&a){const i=e.EpF();e.TgZ(0,"div",3)(1,"ion-button",4),e.NdJ("click",function(){e.CHM(i);const d=e.oxw();return e.KtG(d.onGoingBack())}),e._UZ(2,"ion-icon",5),e.qZA()()}}function _(a,n){if(1&a){const i=e.EpF();e.TgZ(0,"div",6)(1,"ion-button",4),e.NdJ("click",function(){e.CHM(i);const d=e.oxw();return e.KtG(d.onGoingHome())}),e._UZ(2,"ion-icon",7),e.qZA()()}}function s(a,n){if(1&a){const i=e.EpF();e.TgZ(0,"div",6)(1,"ion-button",4),e.NdJ("click",function(){e.CHM(i);const d=e.oxw();return e.KtG(d.customButton.click())}),e._UZ(2,"ion-icon",8),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(2),e.Q6J("name",i.customButton.icon)}}let v=(()=>{class a{constructor(i){this.router=i}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,t,3,0,"div",1),e.YNc(2,_,3,0,"div",2),e.YNc(3,s,3,1,"div",2),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",r.backUrl),e.xp6(1),e.Q6J("ngIf",r.homeUrl),e.xp6(1),e.Q6J("ngIf",r.customButton))},dependencies:[l.O5,c.YG,c.gu],encapsulation:2}),a})()},1576:(m,E,o)=>{o.d(E,{Y:()=>c});var e=o(6895),u=o(4731),l=o(8256);let c=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[e.ez,u.Pc]}),t})()},6250:(m,E,o)=>{o.d(E,{T:()=>s});var e=o(655),u=o(7423),l=o(76);const c=(0,u.fo)("Camera",{web:()=>o.e(3954).then(o.bind(o,3954)).then(v=>new v.CameraWeb)});var t=o(1067),_=o(8256);let s=(()=>{class v{constructor(){this.takePicture=()=>(0,e.mG)(this,void 0,void 0,function*(){return yield c.getPhoto({quality:90,source:l.oK.Camera,resultType:l.dk.Uri})}),this.openGallery=()=>(0,e.mG)(this,void 0,void 0,function*(){return yield c.pickImages({quality:90,limit:1})}),this.convertBlobToBase64=n=>new Promise((i,r)=>{const d=new FileReader;d.onerror=r,d.onload=()=>{i(d.result)},d.readAsDataURL(n)})}saveLocalLogo(n){return(0,e.mG)(this,void 0,void 0,function*(){const i=yield this.readAsBase64(n);yield t.fy.writeFile({path:"logo.jpeg",data:i,directory:t.tP.Data})})}saveLocalAuditoryEvidence(n,i){return(0,e.mG)(this,void 0,void 0,function*(){const r=yield this.readAsBase64(n),d=`${i}-AUD${this.generateName()}`;return yield t.fy.writeFile({path:d,data:r,directory:t.tP.Data}),d})}saveLocalHelmetAuditoryEvidence(n,i){return(0,e.mG)(this,void 0,void 0,function*(){const r=yield this.readAsBase64(n),d=`${i}-HEL${this.generateName()}`;return yield t.fy.writeFile({path:d,data:r,directory:t.tP.Data}),d})}saveLocalBeltAuditoryEvidence(n,i){return(0,e.mG)(this,void 0,void 0,function*(){const r=`${i}-BEL${this.generateName()}`;return yield t.fy.writeFile({path:r,data:n,directory:t.tP.Data}),r})}saveLocalGeneralCountAuditoryEvidence(n,i){return(0,e.mG)(this,void 0,void 0,function*(){const r=`${i}-GCO${this.generateName()}`;return yield t.fy.writeFile({path:r,data:n,directory:t.tP.Data}),r})}saveLocalAnswerEvidence(n,i,r){return(0,e.mG)(this,void 0,void 0,function*(){const d=yield this.readAsBase64(n),y=`${i}-ANS${r}-${this.generateName()}`;return yield t.fy.writeFile({path:y,data:d,directory:t.tP.Data}),y})}getLocalAuditoryEvidence(n){return t.fy.readFile({path:n,encoding:t.ez.UTF8,directory:t.tP.Data})}getLocalAuditoryEvidenceUri(n){return t.fy.getUri({path:n,directory:t.tP.Data})}getLocalAnswerEvidence(n){return t.fy.readFile({path:n,encoding:t.ez.UTF8,directory:t.tP.Data})}getLocalAnswerEvidenceUri(n){return t.fy.getUri({path:n,directory:t.tP.Data})}removeLocalAuditoryEvidence(n){return t.fy.deleteFile({path:n,directory:t.tP.Data})}removeLocalAnswerEvidence(n){return t.fy.deleteFile({path:n,directory:t.tP.Data})}generateName(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";let r="";for(let d=0;d<64;d++)r+=n.charAt(Math.floor(Math.random()*n.length));return`${r}.png`}getLocalLogo(){return t.fy.readFile({path:"logo.jpeg",encoding:t.ez.UTF8,directory:t.tP.Data})}getLocalLogoUri(){return t.fy.getUri({path:"logo.jpeg",directory:t.tP.Data})}readAsBase64(n){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.convertBlobToBase64(n)})}onTakePicture(n){return(0,e.mG)(this,void 0,void 0,function*(){})}}return v.\u0275fac=function(n){return new(n||v)},v.\u0275prov=_.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},1229:(m,E,o)=>{o.d(E,{N:()=>c});var e=o(8256),u=o(3269),l=o(9641);let c=(()=>{class t{constructor(s,v){this.databaseService=s,this.httpService=v}localSave(s){const v=(new Date).toISOString();return this.databaseService.executeQuery(`\n      INSERT INTO answer_evidences (auditory_id, question_id, dir, creation_date)\n      VALUES (${s.auditoryId}, ${s.questionId}, "${s.dir}", "${v}");\n    `)}getEvidencesByAuditoryAndQuestion(s,v){return this.databaseService.executeQuery(`SELECT * FROM answer_evidences WHERE auditory_id = ${s} AND question_id = ${v};`)}getEvidencesByAuditory(s){return this.databaseService.executeQuery(`SELECT * FROM answer_evidences WHERE auditory_id = ${s};`)}getLastInsertedDir(){return this.databaseService.executeQuery("SELECT MAX(id) AS id, dir FROM answer_evidences LIMIT 1;")}localRemove(s){return this.databaseService.executeQuery(`DELETE FROM answer_evidences WHERE dir = "${s}";`)}uploadImage(s,v,a,n,i){let r=new FormData;return r.append("image",s),r.append("auditory_id",v),r.append("question_id",a),r.append("creation_date",n),r.append("dir",i),this.httpService.postFile("/auditory/upload-answer-evidence",r)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(u.k),e.LFG(l.g))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2628:(m,E,o)=>{o.d(E,{P:()=>_});var e=o(1135),u=o(5698),l=o(313),c=o(8256),t=o(3269);let _=(()=>{class s{constructor(a){this.databaseService=a}getAnswersBySectionByAuditory(a){return this.databaseService.executeQuery(`SELECT * FROM answers WHERE auditory_id = ${a};`)}getAnswersBySection(a,n){return this.databaseService.executeQuery(`SELECT * FROM answers JOIN questions on questions.id = answers.question_id WHERE answers.auditory_id = ${a} AND questions.section_id = ${n};`)}saveAnswer(a,n,i){const r=new e.X(l.W);return this.databaseService.executeQuery(`SELECT * FROM answers WHERE auditory_id = ${n} AND question_id = ${a};`).subscribe(d=>{d!==l.W&&setTimeout(()=>{const y=(new Date).toISOString();0===d.values.length?this.databaseService.executeQuery(`INSERT INTO answers (auditory_id, question_id, value, creation_date, update_date) VALUES (${n}, ${a}, "${i}", "${y}", "${y}");`).subscribe(h=>{h!==l.W&&r.next("saved")}):this.databaseService.executeQuery(`UPDATE answers SET value="${i}", update_date="${y}" WHERE auditory_id = ${n} AND question_id = ${a};`).subscribe(h=>{h!==l.W&&r.next("updated")})},20)}),r.pipe((0,u.q)(2))}deleteAnswersByAuditory(a){return this.databaseService.executeQuery(`DELETE FROM answers WHERE auditory_id = ${a};`)}deleteAnswer(a,n){return this.databaseService.executeQuery(`DELETE FROM answers WHERE auditory_id = ${n} AND question_id = ${a};`)}answerExists(a,n){return this.databaseService.executeQuery(`SELECT answers.value FROM answers JOIN questions on questions.id = answers.question_id WHERE answers.auditory_id = ${n} AND questions.uid = ${a};`)}}return s.\u0275fac=function(a){return new(a||s)(c.LFG(t.k))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);