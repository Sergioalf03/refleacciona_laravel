"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3938],{6769:(f,v,n)=>{n.d(v,{$:()=>e});var t=n(8256),_=n(1433),u=n(6895),g=n(4731);function c(o,m){if(1&o){const s=t.EpF();t.TgZ(0,"div",3)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(s);const C=t.oxw();return t.KtG(C.onGoingBack())}),t._UZ(2,"ion-icon",5),t.qZA()()}}function d(o,m){if(1&o){const s=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(s);const C=t.oxw();return t.KtG(C.onGoingHome())}),t._UZ(2,"ion-icon",7),t.qZA()()}}function b(o,m){if(1&o){const s=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(s);const C=t.oxw();return t.KtG(C.customButton.click())}),t._UZ(2,"ion-icon",8),t.qZA()()}if(2&o){const s=t.oxw();t.xp6(2),t.Q6J("name",s.customButton.icon)}}let e=(()=>{class o{constructor(s){this.router=s}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return o.\u0275fac=function(s){return new(s||o)(t.Y36(_.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(s,h){1&s&&(t.TgZ(0,"div",0),t.YNc(1,c,3,0,"div",1),t.YNc(2,d,3,0,"div",2),t.YNc(3,b,3,1,"div",2),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",h.backUrl),t.xp6(1),t.Q6J("ngIf",h.homeUrl),t.xp6(1),t.Q6J("ngIf",h.customButton))},dependencies:[u.O5,g.YG,g.gu],encapsulation:2}),o})()},1576:(f,v,n)=>{n.d(v,{Y:()=>g});var t=n(6895),_=n(4731),u=n(8256);let g=(()=>{class c{}return c.\u0275fac=function(b){return new(b||c)},c.\u0275mod=u.oAB({type:c}),c.\u0275inj=u.cJS({imports:[t.ez,_.Pc]}),c})()},3938:(f,v,n)=>{n.r(v),n.d(v,{BeltCountFormPageModule:()=>P});var t=n(6895),_=n(433),u=n(4731),g=n(6551),c=n(313),d=n(7368),b=n(6764),e=n(8256),o=n(1433),m=n(3863),s=n(7837),h=n(6280),C=n(2424),U=n(2414),T=n(6769);const B=function(l,p){return{"bg-secondary":l,"bg-primary":p}};let D=(()=>{class l{constructor(r,i,a,F,I,A,M){this.activatedRoute=r,this.router=i,this.beltCollectionService=a,this.toastService=F,this.confirmDialogService=I,this.loadingService=A,this.responseService=M,this.backUrl=(0,d.lM)("local"),this.originDirection="Origen",this.destinationDirection="Destino",this.vehicleType="Tipo Veh\xedculo",this.beltlessCount=0,this.beltCount=0,this.chairChairlessCount=0,this.chairCount=0,this.directions=g.m,this.vehicleTypes=b.p,this.disableBeltUserDecrease=!0,this.disableBeltDecrease=!0,this.disableChairUserDecrease=!0,this.disableChairDecrease=!0,this.submitButtonText="Guardar",this.originId=-1,this.destinationId=-1,this.vehicleTypeId=-1,this.canSubmit=!0,this.auditoryId="0",this.countId="0"}ngOnInit(){this.activatedRoute.paramMap.subscribe({next:r=>{this.auditoryId=r.get("id")||"0",this.backUrl=(0,d.lM)("local"),this.beltCollectionService.getByAuditoryId(this.auditoryId).subscribe({next:i=>{if("W"!==i&&i.values.length>0){const a=i.values[0];this.beltCount=a.belts_count,this.beltlessCount=a.adults_count,this.chairCount=a.chairs_count,this.chairChairlessCount=a.child_count,0!==this.beltCount&&(this.disableBeltDecrease=!1),0!==this.beltlessCount&&(this.disableBeltUserDecrease=!1),0!==this.chairChairlessCount&&(this.disableChairUserDecrease=!1),0!==this.chairCount&&(this.disableChairDecrease=!1),this.countId=a.id}},error:i=>this.responseService.onError(i,"No se pudo recuperar el conteo")})}}).unsubscribe()}onOriginDismiss(r){}onDestinationDismiss(r){}onVehiclenDismiss(r){}increaseBeltUsers(){this.beltlessCount++,this.disableBeltUserDecrease=!1}decreaseBeltUsers(){this.beltlessCount>0&&(this.beltlessCount--,this.disableBeltUserDecrease=0===this.beltlessCount)}increaseBelts(){this.beltCount++,this.disableBeltDecrease=!1}decreaseBelts(){this.beltCount>0&&(this.beltCount--,this.disableBeltDecrease=0===this.beltCount)}increaseChairUsers(){this.chairChairlessCount++,this.disableChairUserDecrease=!1}decreaseChairUsers(){this.chairChairlessCount>0&&(this.chairChairlessCount--,this.disableChairUserDecrease=0===this.chairChairlessCount)}increaseChairs(){this.chairCount++,this.disableChairDecrease=!1}decreaseChairs(){this.chairCount>0&&(this.chairCount--,this.disableChairDecrease=0===this.chairCount)}onSubmit(){this.confirmDialogService.presentAlert("\xbfDesea guardar el conteo?",()=>{this.loadingService.showLoading();const r={belt_auditory_id:this.auditoryId,origin:this.originId,destination:this.destinationId,beltUserCount:this.beltlessCount,beltCount:this.beltCount,chairUserCount:this.chairChairlessCount,chairCount:this.chairCount};"0"===this.countId?this.beltCollectionService.save(r).subscribe({next:i=>{i!==c.W&&(this.loadingService.dismissLoading(),this.router.navigateByUrl((0,d.lM)("local")))},error:i=>{this.responseService.onError(i,"No se pudo guardar el conteo")}}):this.beltCollectionService.update(this.countId,r).subscribe({next:i=>{i!==c.W&&(this.loadingService.dismissLoading(),this.router.navigateByUrl((0,d.lM)("local")))},error:i=>{this.responseService.onError(i,"No se pudo guardar el conteo")}})})}onCancel(){this.router.navigateByUrl((0,d.lM)("local"))}}return l.\u0275fac=function(r){return new(r||l)(e.Y36(o.gz),e.Y36(o.F0),e.Y36(m.P),e.Y36(s.k),e.Y36(h.D),e.Y36(C.b),e.Y36(U.J))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-belt-count-form"]],decls:64,vars:18,consts:[["homeUrl","/home",3,"backUrl"],[1,"mx-2","mt-4","mb-3"],[1,"my-3","mx-2","text-justify"],[1,"mx-2","mt-1","ion-text-center"],[1,"row"],[1,"col-6","p-4","pt-0","pe-2"],[1,"card","ion-button",3,"ngClass"],[1,"ion-text-center","mt-4","mb-2",3,"click"],["color","light","size","large","name","remove"],[1,"text-light"],[1,"col-6","p-4","pt-0","ps-2"],[1,"card","button","bg-primary"],["color","light","size","large","name","add"],[1,"row","p-2"],[1,"col"],["color","danger","expand","block",3,"click"],["expand","block",3,"disabled","click"]],template:function(r,i){1&r&&(e.TgZ(0,"ion-content"),e._UZ(1,"app-header-buttons",0),e.TgZ(2,"div",1)(3,"h1"),e._uU(4,"Registros de uso de cintur\xf3n"),e.qZA()(),e.TgZ(5,"div",2)(6,"p"),e._uU(7," Ubicado en un cruce espec\xedfico, indique la cantidad de personas con y sin cintur\xf3n y silla de retenci\xf3n. "),e.qZA()(),e.TgZ(8,"div",3)(9,"h3"),e._uU(10),e.qZA()(),e.TgZ(11,"div",4)(12,"div",5)(13,"div",6)(14,"div",7),e.NdJ("click",function(){return i.decreaseBeltUsers()}),e._UZ(15,"ion-icon",8),e.TgZ(16,"p",9),e._uU(17,"Decrementar"),e.qZA()()()(),e.TgZ(18,"div",10)(19,"div",11)(20,"div",7),e.NdJ("click",function(){return i.increaseBeltUsers()}),e._UZ(21,"ion-icon",12),e.TgZ(22,"p",9),e._uU(23,"Incrementar"),e.qZA()()()()(),e.TgZ(24,"div",3)(25,"h3"),e._uU(26),e.qZA()(),e.TgZ(27,"div",4)(28,"div",5)(29,"div",6)(30,"div",7),e.NdJ("click",function(){return i.decreaseBelts()}),e._UZ(31,"ion-icon",8),e.TgZ(32,"p",9),e._uU(33,"Decrementar"),e.qZA()()()(),e.TgZ(34,"div",10)(35,"div",11)(36,"div",7),e.NdJ("click",function(){return i.increaseBelts()}),e._UZ(37,"ion-icon",12),e.TgZ(38,"p",9),e._uU(39,"Incrementar"),e.qZA()()()()(),e.TgZ(40,"div",3)(41,"h3"),e._uU(42),e.qZA()(),e.TgZ(43,"div",4)(44,"div",5)(45,"div",6)(46,"div",7),e.NdJ("click",function(){return i.decreaseChairs()}),e._UZ(47,"ion-icon",8),e.TgZ(48,"p",9),e._uU(49,"Decrementar"),e.qZA()()()(),e.TgZ(50,"div",10)(51,"div",11)(52,"div",7),e.NdJ("click",function(){return i.increaseChairs()}),e._UZ(53,"ion-icon",12),e.TgZ(54,"p",9),e._uU(55,"Incrementar"),e.qZA()()()()()(),e.TgZ(56,"ion-footer")(57,"div",13)(58,"div",14)(59,"ion-button",15),e.NdJ("click",function(){return i.onCancel()}),e._uU(60," CANCELAR "),e.qZA()(),e.TgZ(61,"div",14)(62,"ion-button",16),e.NdJ("click",function(){return i.onSubmit()}),e._uU(63),e.qZA()()()()),2&r&&(e.xp6(1),e.Q6J("backUrl",i.backUrl),e.xp6(9),e.hij("Sin cintur\xf3n: ",i.beltlessCount,""),e.xp6(3),e.Q6J("ngClass",e.WLB(9,B,i.disableBeltUserDecrease,!i.disableBeltUserDecrease)),e.xp6(13),e.hij("Con cintur\xf3n: ",i.beltCount," "),e.xp6(3),e.Q6J("ngClass",e.WLB(12,B,i.disableBeltDecrease,!i.disableBeltDecrease)),e.xp6(13),e.hij("Con silla de retenci\xf3n: ",i.chairCount," "),e.xp6(3),e.Q6J("ngClass",e.WLB(15,B,i.disableChairDecrease,!i.disableChairDecrease)),e.xp6(17),e.Q6J("disabled",!i.canSubmit),e.xp6(1),e.hij(" ",i.submitButtonText," "))},dependencies:[t.mk,u.YG,u.W2,u.fr,u.gu,T.$],encapsulation:2}),l})();var Z=n(1576);const y=[{path:"",component:D}];let P=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[t.ez,_.u5,u.Pc,o.Bz.forChild(y),Z.Y]}),l})()}}]);