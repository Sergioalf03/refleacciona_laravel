"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8909],{6769:(B,_,n)=>{n.d(_,{$:()=>t});var o=n(8256),C=n(1433),a=n(6895),g=n(4731);function l(r,h){if(1&r){const s=o.EpF();o.TgZ(0,"div",3)(1,"ion-button",4),o.NdJ("click",function(){o.CHM(s);const p=o.oxw();return o.KtG(p.onGoingBack())}),o._UZ(2,"ion-icon",5),o.qZA()()}}function f(r,h){if(1&r){const s=o.EpF();o.TgZ(0,"div",6)(1,"ion-button",4),o.NdJ("click",function(){o.CHM(s);const p=o.oxw();return o.KtG(p.onGoingHome())}),o._UZ(2,"ion-icon",7),o.qZA()()}}function d(r,h){if(1&r){const s=o.EpF();o.TgZ(0,"div",6)(1,"ion-button",4),o.NdJ("click",function(){o.CHM(s);const p=o.oxw();return o.KtG(p.customButton.click())}),o._UZ(2,"ion-icon",8),o.qZA()()}if(2&r){const s=o.oxw();o.xp6(2),o.Q6J("name",s.customButton.icon)}}let t=(()=>{class r{constructor(s){this.router=s}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return r.\u0275fac=function(s){return new(s||r)(o.Y36(C.F0))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(s,m){1&s&&(o.TgZ(0,"div",0),o.YNc(1,l,3,0,"div",1),o.YNc(2,f,3,0,"div",2),o.YNc(3,d,3,1,"div",2),o.qZA()),2&s&&(o.xp6(1),o.Q6J("ngIf",m.backUrl),o.xp6(1),o.Q6J("ngIf",m.homeUrl),o.xp6(1),o.Q6J("ngIf",m.customButton))},dependencies:[a.O5,g.YG,g.gu],encapsulation:2}),r})()},1576:(B,_,n)=>{n.d(_,{Y:()=>g});var o=n(6895),C=n(4731),a=n(8256);let g=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=a.oAB({type:l}),l.\u0275inj=a.cJS({imports:[o.ez,C.Pc]}),l})()},8909:(B,_,n)=>{n.r(_),n.d(_,{HelmetCountListPageModule:()=>I});var o=n(6895),C=n(433),a=n(4731),g=n(655),l=n(6551),f=n(313),d=n(7368),t=n(8256),r=n(4112),h=n(2424),s=n(1433),m=n(2414),p=n(6280),H=n(6769);function E(c,v){if(1&c){const e=t.EpF();t.TgZ(0,"div",6)(1,"h4",7),t._uU(2,"Sin Conteos"),t.qZA(),t.TgZ(3,"ion-button",8),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onNewCount())}),t._uU(4,"Iniciar uno"),t.qZA()()}}function Z(c,v){if(1&c){const e=t.EpF();t.TgZ(0,"ion-item",9)(1,"ion-label")(2,"h2",10),t._uU(3),t._UZ(4,"ion-icon",11),t._uU(5),t._UZ(6,"span",12),t._uU(7),t._UZ(8,"span",12),t._uU(9),t.qZA()(),t.TgZ(10,"ion-button",13),t.NdJ("click",function(){const x=t.CHM(e).$implicit,U=t.oxw();return t.KtG(U.presentActionSheetOptions(x))}),t._UZ(11,"ion-icon",14),t.qZA()()}if(2&c){const e=v.$implicit;t.xp6(3),t.hij("",e.originText," "),t.xp6(2),t.hij(" ",e.destinationText," "),t.xp6(2),t.hij(" ",e.users_count," Usuarios, "),t.xp6(2),t.hij(" ",e.helmets_count," Cascos ")}}const T=l.m;let P=(()=>{class c{constructor(e,i,u,x,U,y,O){this.helmetCollectionService=e,this.actionSheetCtrl=i,this.loadingSerivice=u,this.router=x,this.activatedRoute=U,this.responseService=y,this.confirmDialog=O,this.backUrl=(0,d.fK)("1","0"),this.counts=[],this.loading=!0,this.auditoryId="0",this.customButton={click:()=>(0,g.mG)(this,void 0,void 0,function*(){return this.router.navigateByUrl((0,d.F$)(this.auditoryId))}),icon:"add"}}ngOnInit(){}ionViewDidEnter(){this.activatedRoute.paramMap.subscribe({next:e=>{this.loadingSerivice.showLoading(),this.loading=!0,this.auditoryId=e.get("id")||"0",this.backUrl=(0,d.fK)("1",this.auditoryId),this.loadList()}}).unsubscribe()}loadList(){this.helmetCollectionService.getList(this.auditoryId).subscribe({next:e=>{e!==f.W&&(this.counts=e.values.map(i=>Object.assign({originText:T.find(u=>+u.id==+i.origin).short,destinationText:T.find(u=>+u.id==+i.destination).short},i)),this.loading=!1,this.loadingSerivice.dismissLoading())},error:e=>{this.responseService.onError(e,"No se pudo guardar el conteo")}})}presentActionSheetOptions(e){return(0,g.mG)(this,void 0,void 0,function*(){const i=[{text:"Eliminar",role:"destructive",handler:()=>this.onDelete(e.id)},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}];yield(yield this.actionSheetCtrl.create({header:"Opciones",mode:"ios",buttons:i})).present()})}onDelete(e){this.confirmDialog.presentAlert("\xbfDesea eliminar el conteo?",()=>{this.loadingSerivice.showLoading(),this.helmetCollectionService.delete(e).subscribe({next:i=>{i!==f.W&&this.loadList()},error:i=>{this.responseService.onError(i,"No se pudo guardar el conteo")}})})}onNewCount(){this.router.navigateByUrl((0,d.F$)(this.auditoryId))}}return c.\u0275fac=function(e){return new(e||c)(t.Y36(r.C),t.Y36(a.BX),t.Y36(h.b),t.Y36(s.F0),t.Y36(s.gz),t.Y36(m.J),t.Y36(p.D))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-helmet-count-list"]],decls:10,vars:4,consts:[[3,"backUrl","customButton"],[1,"mx-2","mt-4"],["class","text-center",4,"ngIf"],[1,"row"],[1,"col-12","p-4"],["class","mt-2 txtInput ion-no-padding ion-no-margin",4,"ngFor","ngForOf"],[1,"text-center"],[1,"mt-2"],[3,"click"],[1,"mt-2","txtInput","ion-no-padding","ion-no-margin"],[1,"text-start","ps-2"],["name","arrow-forward"],[1,"mx-1"],["slot","end","size","small",3,"click"],["slot","icon-only","name","menu"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content"),t._UZ(1,"app-header-buttons",0),t.TgZ(2,"div",1)(3,"h1"),t._uU(4,"Listado de registros"),t.qZA()(),t._UZ(5,"div",1),t.YNc(6,E,5,0,"div",2),t.TgZ(7,"div",3)(8,"div",4),t.YNc(9,Z,12,4,"ion-item",5),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("backUrl",i.backUrl)("customButton",i.customButton),t.xp6(5),t.Q6J("ngIf",!i.loading&&0===i.counts.length),t.xp6(3),t.Q6J("ngForOf",i.counts))},dependencies:[o.sg,o.O5,a.YG,a.W2,a.gu,a.Ie,a.Q$,H.$],encapsulation:2}),c})();var L=n(1576);const M=[{path:"",component:P}];let I=(()=>{class c{}return c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[o.ez,C.u5,a.Pc,s.Bz.forChild(M),L.Y]}),c})()}}]);