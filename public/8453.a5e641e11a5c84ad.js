"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8453],{6769:(U,g,n)=>{n.d(g,{$:()=>f});var t=n(8256),_=n(1433),c=n(6895),v=n(4731);function r(l,m){if(1&l){const i=t.EpF();t.TgZ(0,"div",3)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(i);const h=t.oxw();return t.KtG(h.onGoingBack())}),t._UZ(2,"ion-icon",5),t.qZA()()}}function p(l,m){if(1&l){const i=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(i);const h=t.oxw();return t.KtG(h.onGoingHome())}),t._UZ(2,"ion-icon",7),t.qZA()()}}function e(l,m){if(1&l){const i=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(i);const h=t.oxw();return t.KtG(h.customButton.click())}),t._UZ(2,"ion-icon",8),t.qZA()()}if(2&l){const i=t.oxw();t.xp6(2),t.Q6J("name",i.customButton.icon)}}let f=(()=>{class l{constructor(i){this.router=i}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(_.F0))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(i,d){1&i&&(t.TgZ(0,"div",0),t.YNc(1,r,3,0,"div",1),t.YNc(2,p,3,0,"div",2),t.YNc(3,e,3,1,"div",2),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",d.backUrl),t.xp6(1),t.Q6J("ngIf",d.homeUrl),t.xp6(1),t.Q6J("ngIf",d.customButton))},dependencies:[c.O5,v.YG,v.gu],encapsulation:2}),l})()},1576:(U,g,n)=>{n.d(g,{Y:()=>v});var t=n(6895),_=n(4731),c=n(8256);let v=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[t.ez,_.Pc]}),r})()},8453:(U,g,n)=>{n.r(g),n.d(g,{HelmetCountFormPageModule:()=>D});var t=n(6895),_=n(433),c=n(4731),v=n(6551),r=n(7368),p=n(313),e=n(8256),f=n(1433),l=n(4112),m=n(6280),i=n(7837),d=n(2424),h=n(2414),H=n(6769);const b=function(a,C){return{"bg-secondary":a,"bg-primary":C}};let T=(()=>{class a{constructor(s,o,u,I,M,P,y,E){this.modalCtrl=s,this.activatedRoute=o,this.router=u,this.helmetCollectionService=I,this.confirmDialogService=M,this.toastService=P,this.loadingService=y,this.responseService=E,this.backUrl=(0,r.Ms)("local"),this.helmetlessCount=0,this.helmetCount=0,this.directions=v.m,this.disableUserDecrease=!0,this.disableHelmetDecrease=!0,this.submitButtonText="Guardar",this.originId=-1,this.destinationId=-1,this.canSubmit=!0,this.auditoryId="0",this.countId="0"}ngOnInit(){this.activatedRoute.paramMap.subscribe({next:s=>{this.auditoryId=s.get("id")||"0",this.backUrl=(0,r.Ms)("local"),this.helmetCollectionService.getByAuditoryId(this.auditoryId).subscribe({next:o=>{if("W"!==o&&o.values.length>0){const u=o.values[0];this.helmetCount=u.helmets_count,this.helmetlessCount=u.users_count,0!==this.helmetCount&&(this.disableHelmetDecrease=!1),0!==this.helmetlessCount&&(this.disableUserDecrease=!1),this.countId=u.id}},error:o=>this.responseService.onError(o,"No se pudo recuperar el conteo")})}}).unsubscribe()}onOriginDismiss(s){}onDestinationDismiss(s){}increaseUsers(){this.helmetlessCount++,this.disableUserDecrease=!1}decreaseUsers(){this.helmetlessCount>0&&(this.helmetlessCount--,this.disableUserDecrease=0===this.helmetlessCount)}increaseHelmets(){this.helmetCount++,this.disableHelmetDecrease=!1}decreaseHelmets(){this.helmetCount>0&&(this.helmetCount--,this.disableHelmetDecrease=0===this.helmetCount)}onSubmit(){this.confirmDialogService.presentAlert("\xbfDesea guardar el conteo?",()=>{this.loadingService.showLoading();const s={helmet_auditory_id:this.auditoryId,origin:this.originId,destination:this.destinationId,helmetlessCount:this.helmetlessCount,helmetCount:this.helmetCount};"0"===this.countId?this.helmetCollectionService.save(s).subscribe({next:o=>{o!==p.W&&(this.loadingService.dismissLoading(),this.router.navigateByUrl((0,r.Ms)("local")))},error:o=>{this.responseService.onError(o,"No se pudo guardar el conteo")}}):this.helmetCollectionService.update(this.countId,s).subscribe({next:o=>{o!==p.W&&(this.loadingService.dismissLoading(),this.router.navigateByUrl((0,r.Ms)("local")))},error:o=>{this.responseService.onError(o,"No se pudo guardar el conteo")}})})}onCancel(){this.router.navigateByUrl((0,r.Ms)("local"))}}return a.\u0275fac=function(s){return new(s||a)(e.Y36(c.IN),e.Y36(f.gz),e.Y36(f.F0),e.Y36(l.C),e.Y36(m.D),e.Y36(i.k),e.Y36(d.b),e.Y36(h.J))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-helmet-count-form"]],decls:48,vars:13,consts:[["homeUrl","/home",3,"backUrl"],[1,"mx-2","mt-4","mb-2"],[1,"my-3","mx-2","text-justify"],[1,"mx-2","mt-1","ion-text-center"],[1,"row"],[1,"col-6","p-4","pt-0","pe-2"],[1,"card","ion-button",3,"ngClass"],[1,"ion-text-center","mt-4","mb-2",3,"click"],["color","light","size","large","name","remove"],[1,"text-light"],[1,"col-6","p-4","pt-0","ps-2"],[1,"card","button","bg-primary"],["color","light","size","large","name","add"],[1,"row","p-2"],[1,"col"],["color","danger","expand","block",3,"click"],["expand","block",3,"disabled","click"]],template:function(s,o){1&s&&(e.TgZ(0,"ion-content"),e._UZ(1,"app-header-buttons",0),e.TgZ(2,"div",1)(3,"h1"),e._uU(4,"Registro de uso de casco"),e.qZA()(),e.TgZ(5,"div",2)(6,"p"),e._uU(7," Ubicado en un cruce espec\xedfico, indique la cantidad de personas con y sin casco. "),e.qZA()(),e.TgZ(8,"div",3)(9,"h3"),e._uU(10),e.qZA()(),e.TgZ(11,"div",4)(12,"div",5)(13,"div",6)(14,"div",7),e.NdJ("click",function(){return o.decreaseHelmets()}),e._UZ(15,"ion-icon",8),e.TgZ(16,"p",9),e._uU(17,"Decrementar"),e.qZA()()()(),e.TgZ(18,"div",10)(19,"div",11)(20,"div",7),e.NdJ("click",function(){return o.increaseHelmets()}),e._UZ(21,"ion-icon",12),e.TgZ(22,"p",9),e._uU(23,"Incrementar"),e.qZA()()()()(),e.TgZ(24,"div",3)(25,"h3"),e._uU(26),e.qZA()(),e.TgZ(27,"div",4)(28,"div",5)(29,"div",6)(30,"div",7),e.NdJ("click",function(){return o.decreaseUsers()}),e._UZ(31,"ion-icon",8),e.TgZ(32,"p",9),e._uU(33,"Decrementar"),e.qZA()()()(),e.TgZ(34,"div",10)(35,"div",11)(36,"div",7),e.NdJ("click",function(){return o.increaseUsers()}),e._UZ(37,"ion-icon",12),e.TgZ(38,"p",9),e._uU(39,"Incrementar"),e.qZA()()()()()(),e.TgZ(40,"ion-footer")(41,"div",13)(42,"div",14)(43,"ion-button",15),e.NdJ("click",function(){return o.onCancel()}),e._uU(44," CANCELAR "),e.qZA()(),e.TgZ(45,"div",14)(46,"ion-button",16),e.NdJ("click",function(){return o.onSubmit()}),e._uU(47),e.qZA()()()()),2&s&&(e.xp6(1),e.Q6J("backUrl",o.backUrl),e.xp6(9),e.hij("Con Casco: ",o.helmetCount," "),e.xp6(3),e.Q6J("ngClass",e.WLB(7,b,o.disableHelmetDecrease,!o.disableHelmetDecrease)),e.xp6(13),e.hij("Sin casco: ",o.helmetlessCount,""),e.xp6(3),e.Q6J("ngClass",e.WLB(10,b,o.disableUserDecrease,!o.disableUserDecrease)),e.xp6(17),e.Q6J("disabled",!o.canSubmit),e.xp6(1),e.hij(" ",o.submitButtonText," "))},dependencies:[t.mk,c.YG,c.W2,c.fr,c.gu,H.$],encapsulation:2}),a})();var Z=n(1576);const B=[{path:"",component:T}];let D=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[t.ez,_.u5,c.Pc,f.Bz.forChild(B),Z.Y]}),a})()}}]);