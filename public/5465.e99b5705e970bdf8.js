"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5465],{76:(C,m,n)=>{n.d(m,{GW:()=>d,dk:()=>l,oK:()=>t});var t=(()=>{return(c=t||(t={})).Prompt="PROMPT",c.Camera="CAMERA",c.Photos="PHOTOS",t;var c})(),d=(()=>{return(c=d||(d={})).Rear="REAR",c.Front="FRONT",d;var c})(),l=(()=>{return(c=l||(l={})).Uri="uri",c.Base64="base64",c.DataUrl="dataUrl",l;var c})()},1443:(C,m,n)=>{n.d(m,{ez:()=>d,tP:()=>t});var t=(()=>{return(e=t||(t={})).Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE",t;var e})(),d=(()=>{return(e=d||(d={})).UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16",d;var e})()},1067:(C,m,n)=>{n.d(m,{ez:()=>d.ez,fy:()=>l,tP:()=>d.tP});var t=n(7423),d=n(1443);const l=(0,t.fo)("Filesystem",{web:()=>n.e(6364).then(n.bind(n,6364)).then(c=>new c.FilesystemWeb)})},6769:(C,m,n)=>{n.d(m,{$:()=>g});var t=n(8256),d=n(1433),l=n(6895),c=n(4731);function e(u,i){if(1&u){const r=t.EpF();t.TgZ(0,"div",3)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(r);const s=t.oxw();return t.KtG(s.onGoingBack())}),t._UZ(2,"ion-icon",5),t.qZA()()}}function o(u,i){if(1&u){const r=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(r);const s=t.oxw();return t.KtG(s.onGoingHome())}),t._UZ(2,"ion-icon",7),t.qZA()()}}function y(u,i){if(1&u){const r=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(r);const s=t.oxw();return t.KtG(s.customButton.click())}),t._UZ(2,"ion-icon",8),t.qZA()()}if(2&u){const r=t.oxw();t.xp6(2),t.Q6J("name",r.customButton.icon)}}let g=(()=>{class u{constructor(r){this.router=r}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(d.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t.YNc(1,e,3,0,"div",1),t.YNc(2,o,3,0,"div",2),t.YNc(3,y,3,1,"div",2),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",a.backUrl),t.xp6(1),t.Q6J("ngIf",a.homeUrl),t.xp6(1),t.Q6J("ngIf",a.customButton))},dependencies:[l.O5,c.YG,c.gu],encapsulation:2}),u})()},1576:(C,m,n)=>{n.d(m,{Y:()=>c});var t=n(6895),d=n(4731),l=n(8256);let c=(()=>{class e{}return e.\u0275fac=function(y){return new(y||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[t.ez,d.Pc]}),e})()},6250:(C,m,n)=>{n.d(m,{T:()=>y});var t=n(655),d=n(7423),l=n(76);const c=(0,d.fo)("Camera",{web:()=>n.e(3954).then(n.bind(n,3954)).then(g=>new g.CameraWeb)});var e=n(1067),o=n(8256);let y=(()=>{class g{constructor(){this.takePicture=()=>(0,t.mG)(this,void 0,void 0,function*(){return yield c.getPhoto({quality:90,source:l.oK.Camera,resultType:l.dk.Uri})}),this.openGallery=()=>(0,t.mG)(this,void 0,void 0,function*(){return yield c.pickImages({quality:90,limit:1})}),this.convertBlobToBase64=i=>new Promise((r,a)=>{const s=new FileReader;s.onerror=a,s.onload=()=>{r(s.result)},s.readAsDataURL(i)})}saveLocalLogo(i){return(0,t.mG)(this,void 0,void 0,function*(){const r=yield this.readAsBase64(i);yield e.fy.writeFile({path:"logo.jpeg",data:r,directory:e.tP.Data})})}saveLocalAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=yield this.readAsBase64(i),s=`${r}-AUD${this.generateName()}`;return yield e.fy.writeFile({path:s,data:a,directory:e.tP.Data}),s})}saveLocalHelmetAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=yield this.readAsBase64(i),s=`${r}-HEL${this.generateName()}`;return yield e.fy.writeFile({path:s,data:a,directory:e.tP.Data}),s})}saveLocalBeltAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=`${r}-BEL${this.generateName()}`;return yield e.fy.writeFile({path:a,data:i,directory:e.tP.Data}),a})}saveLocalGeneralCountAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=`${r}-GCO${this.generateName()}`;return yield e.fy.writeFile({path:a,data:i,directory:e.tP.Data}),a})}saveLocalAnswerEvidence(i,r,a){return(0,t.mG)(this,void 0,void 0,function*(){const s=yield this.readAsBase64(i),P=`${r}-ANS${a}-${this.generateName()}`;return yield e.fy.writeFile({path:P,data:s,directory:e.tP.Data}),P})}getLocalAuditoryEvidence(i){return e.fy.readFile({path:i,encoding:e.ez.UTF8,directory:e.tP.Data})}getLocalAuditoryEvidenceUri(i){return e.fy.getUri({path:i,directory:e.tP.Data})}getLocalAnswerEvidence(i){return e.fy.readFile({path:i,encoding:e.ez.UTF8,directory:e.tP.Data})}getLocalAnswerEvidenceUri(i){return e.fy.getUri({path:i,directory:e.tP.Data})}removeLocalAuditoryEvidence(i){return e.fy.deleteFile({path:i,directory:e.tP.Data})}removeLocalAnswerEvidence(i){return e.fy.deleteFile({path:i,directory:e.tP.Data})}generateName(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";let a="";for(let s=0;s<64;s++)a+=i.charAt(Math.floor(Math.random()*i.length));return`${a}.png`}getLocalLogo(){return e.fy.readFile({path:"logo.jpeg",encoding:e.ez.UTF8,directory:e.tP.Data})}getLocalLogoUri(){return e.fy.getUri({path:"logo.jpeg",directory:e.tP.Data})}readAsBase64(i){return(0,t.mG)(this,void 0,void 0,function*(){return yield this.convertBlobToBase64(i)})}onTakePicture(i){return(0,t.mG)(this,void 0,void 0,function*(){})}}return g.\u0275fac=function(i){return new(i||g)},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9567:(C,m,n)=>{n.r(m),n.d(m,{GeneralCountColectionDataPageModule:()=>E});var t=n(6895),d=n(433),l=n(4731),c=n(313),e=n(7368),o=n(8256),y=n(1433),g=n(3216),u=n(2342),i=n(2414),r=n(6280),a=n(2424),s=n(6769);let P=(()=>{class h{constructor(v,p,f,T,B,F,L){this.activatedRoute=v,this.router=p,this.generalCountCollectionService=f,this.generalCountAuditoryService=T,this.responseService=B,this.confirmDialogService=F,this.loadingService=L,this.backUrl=(0,e.hF)("0"),this.registrationCount=0,this.auditoryId="0"}ngOnInit(){}ionViewDidEnter(){this.activatedRoute.paramMap.subscribe({next:v=>{this.auditoryId=v.get("id")||"0","0"!==(v.get("from")||"0")&&(this.backUrl=(0,e.nH)("local")),this.generalCountCollectionService.getCount(this.auditoryId).subscribe({next:f=>{f!==c.W&&(this.registrationCount=f.values[0].total)},error:f=>{this.responseService.onError(f,"No se pudieron recuperar los conteos")}})}}).unsubscribe()}openCountForm(){this.router.navigateByUrl((0,e.H7)(this.auditoryId))}onOpenList(){this.router.navigateByUrl((0,e.Zw)(this.auditoryId))}onReturn(){this.router.navigateByUrl(this.backUrl)}onFinish(){this.confirmDialogService.presentAlert("\xbfDesea terminar el registro?",()=>{this.loadingService.showLoading(),this.generalCountAuditoryService.finishAuditory(this.auditoryId).subscribe({next:v=>{v!==c.W&&(this.loadingService.dismissLoading(),this.responseService.onSuccessAndRedirect((0,e.nH)("local"),"Registro terminado"))},error:v=>{this.responseService.onError(v,"No se pudo actualizar")}})})}}return h.\u0275fac=function(v){return new(v||h)(o.Y36(y.gz),o.Y36(y.F0),o.Y36(g.P),o.Y36(u.B),o.Y36(i.J),o.Y36(r.D),o.Y36(a.b))},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-general-count-colection-data"]],decls:29,vars:2,consts:[["homeUrl","/home",3,"backUrl"],[1,"mx-2","mt-4"],[1,"row"],[1,"col-6","p-4","pe-2"],[1,"card","ion-button","bg-primary",3,"click"],[1,"ion-text-center","mt-5","mb-4"],["color","light","size","large","name","clipboard"],[1,"text-light"],[1,"col-6","p-4","ps-2"],[1,"card","button","bg-primary",3,"click"],["color","light","size","large","name","add"],["expand","full","color","danger",3,"click"],["expand","full",3,"click"]],template:function(v,p){1&v&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-header-buttons",0),o.TgZ(2,"div",1)(3,"h1"),o._uU(4,"Total de registros"),o.qZA()(),o.TgZ(5,"div",1)(6,"h1"),o._uU(7),o.qZA()(),o.TgZ(8,"div",2)(9,"div",3)(10,"div",4),o.NdJ("click",function(){return p.onOpenList()}),o.TgZ(11,"div",5),o._UZ(12,"ion-icon",6),o.TgZ(13,"p",7),o._uU(14,"Listado de registros"),o.qZA()()()(),o.TgZ(15,"div",8)(16,"div",9),o.NdJ("click",function(){return p.openCountForm()}),o.TgZ(17,"div",5),o._UZ(18,"ion-icon",10),o.TgZ(19,"p",7),o._uU(20,"Agregar registro"),o.qZA()()()()()(),o.TgZ(21,"ion-footer")(22,"ion-row")(23,"ion-col")(24,"ion-button",11),o.NdJ("click",function(){return p.onReturn()}),o._uU(25,"SALIR"),o.qZA()(),o.TgZ(26,"ion-col")(27,"ion-button",12),o.NdJ("click",function(){return p.onFinish()}),o._uU(28,"FINALIZAR"),o.qZA()()()()),2&v&&(o.xp6(1),o.Q6J("backUrl",p.backUrl),o.xp6(6),o.Oqu(p.registrationCount))},dependencies:[l.YG,l.wI,l.W2,l.fr,l.gu,l.Nd,s.$],encapsulation:2}),h})();var U=n(1576);const D=[{path:"",component:P}];let E=(()=>{class h{}return h.\u0275fac=function(v){return new(v||h)},h.\u0275mod=o.oAB({type:h}),h.\u0275inj=o.cJS({imports:[t.ez,d.u5,l.Pc,y.Bz.forChild(D),U.Y]}),h})()}}]);