"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2448],{76:(B,m,n)=>{n.d(m,{GW:()=>d,dk:()=>c,oK:()=>t});var t=(()=>{return(s=t||(t={})).Prompt="PROMPT",s.Camera="CAMERA",s.Photos="PHOTOS",t;var s})(),d=(()=>{return(s=d||(d={})).Rear="REAR",s.Front="FRONT",d;var s})(),c=(()=>{return(s=c||(c={})).Uri="uri",s.Base64="base64",s.DataUrl="dataUrl",c;var s})()},1443:(B,m,n)=>{n.d(m,{ez:()=>d,tP:()=>t});var t=(()=>{return(e=t||(t={})).Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE",t;var e})(),d=(()=>{return(e=d||(d={})).UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16",d;var e})()},1067:(B,m,n)=>{n.d(m,{ez:()=>d.ez,fy:()=>c,tP:()=>d.tP});var t=n(7423),d=n(1443);const c=(0,t.fo)("Filesystem",{web:()=>n.e(6364).then(n.bind(n,6364)).then(s=>new s.FilesystemWeb)})},6769:(B,m,n)=>{n.d(m,{$:()=>g});var t=n(8256),d=n(1433),c=n(6895),s=n(4731);function e(u,i){if(1&u){const r=t.EpF();t.TgZ(0,"div",3)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.onGoingBack())}),t._UZ(2,"ion-icon",5),t.qZA()()}}function o(u,i){if(1&u){const r=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.onGoingHome())}),t._UZ(2,"ion-icon",7),t.qZA()()}}function y(u,i){if(1&u){const r=t.EpF();t.TgZ(0,"div",6)(1,"ion-button",4),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.customButton.click())}),t._UZ(2,"ion-icon",8),t.qZA()()}if(2&u){const r=t.oxw();t.xp6(2),t.Q6J("name",r.customButton.icon)}}let g=(()=>{class u{constructor(r){this.router=r}ngOnInit(){}onGoingHome(){this.router.navigateByUrl(this.homeUrl)}onGoingBack(){this.router.navigateByUrl(this.backUrl)}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(d.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-header-buttons"]],inputs:{homeUrl:"homeUrl",backUrl:"backUrl",customButton:"customButton"},decls:4,vars:3,consts:[[1,"row","mt-2","mx-0"],["class","col",4,"ngIf"],["class","col text-end",4,"ngIf"],[1,"col"],["size","small",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"col","text-end"],["slot","icon-only","name","home-sharp"],["slot","icon-only",3,"name"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t.YNc(1,e,3,0,"div",1),t.YNc(2,o,3,0,"div",2),t.YNc(3,y,3,1,"div",2),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",a.backUrl),t.xp6(1),t.Q6J("ngIf",a.homeUrl),t.xp6(1),t.Q6J("ngIf",a.customButton))},dependencies:[c.O5,s.YG,s.gu],encapsulation:2}),u})()},1576:(B,m,n)=>{n.d(m,{Y:()=>s});var t=n(6895),d=n(4731),c=n(8256);let s=(()=>{class e{}return e.\u0275fac=function(y){return new(y||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[t.ez,d.Pc]}),e})()},6250:(B,m,n)=>{n.d(m,{T:()=>y});var t=n(655),d=n(7423),c=n(76);const s=(0,d.fo)("Camera",{web:()=>n.e(3954).then(n.bind(n,3954)).then(g=>new g.CameraWeb)});var e=n(1067),o=n(8256);let y=(()=>{class g{constructor(){this.takePicture=()=>(0,t.mG)(this,void 0,void 0,function*(){return yield s.getPhoto({quality:90,source:c.oK.Camera,resultType:c.dk.Uri})}),this.openGallery=()=>(0,t.mG)(this,void 0,void 0,function*(){return yield s.pickImages({quality:90,limit:1})}),this.convertBlobToBase64=i=>new Promise((r,a)=>{const l=new FileReader;l.onerror=a,l.onload=()=>{r(l.result)},l.readAsDataURL(i)})}saveLocalLogo(i){return(0,t.mG)(this,void 0,void 0,function*(){const r=yield this.readAsBase64(i);yield e.fy.writeFile({path:"logo.jpeg",data:r,directory:e.tP.Data})})}saveLocalAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=yield this.readAsBase64(i),l=`${r}-AUD${this.generateName()}`;return yield e.fy.writeFile({path:l,data:a,directory:e.tP.Data}),l})}saveLocalHelmetAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=yield this.readAsBase64(i),l=`${r}-HEL${this.generateName()}`;return yield e.fy.writeFile({path:l,data:a,directory:e.tP.Data}),l})}saveLocalBeltAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=`${r}-BEL${this.generateName()}`;return yield e.fy.writeFile({path:a,data:i,directory:e.tP.Data}),a})}saveLocalGeneralCountAuditoryEvidence(i,r){return(0,t.mG)(this,void 0,void 0,function*(){const a=`${r}-GCO${this.generateName()}`;return yield e.fy.writeFile({path:a,data:i,directory:e.tP.Data}),a})}saveLocalAnswerEvidence(i,r,a){return(0,t.mG)(this,void 0,void 0,function*(){const l=yield this.readAsBase64(i),P=`${r}-ANS${a}-${this.generateName()}`;return yield e.fy.writeFile({path:P,data:l,directory:e.tP.Data}),P})}getLocalAuditoryEvidence(i){return e.fy.readFile({path:i,encoding:e.ez.UTF8,directory:e.tP.Data})}getLocalAuditoryEvidenceUri(i){return e.fy.getUri({path:i,directory:e.tP.Data})}getLocalAnswerEvidence(i){return e.fy.readFile({path:i,encoding:e.ez.UTF8,directory:e.tP.Data})}getLocalAnswerEvidenceUri(i){return e.fy.getUri({path:i,directory:e.tP.Data})}removeLocalAuditoryEvidence(i){return e.fy.deleteFile({path:i,directory:e.tP.Data})}removeLocalAnswerEvidence(i){return e.fy.deleteFile({path:i,directory:e.tP.Data})}generateName(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";let a="";for(let l=0;l<64;l++)a+=i.charAt(Math.floor(Math.random()*i.length));return`${a}.png`}getLocalLogo(){return e.fy.readFile({path:"logo.jpeg",encoding:e.ez.UTF8,directory:e.tP.Data})}getLocalLogoUri(){return e.fy.getUri({path:"logo.jpeg",directory:e.tP.Data})}readAsBase64(i){return(0,t.mG)(this,void 0,void 0,function*(){return yield this.convertBlobToBase64(i)})}onTakePicture(i){return(0,t.mG)(this,void 0,void 0,function*(){})}}return g.\u0275fac=function(i){return new(i||g)},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9718:(B,m,n)=>{n.r(m),n.d(m,{BeltCollectionDataPageModule:()=>U});var t=n(6895),d=n(433),c=n(4731),s=n(313),e=n(7368),o=n(8256),y=n(1433),g=n(3863),u=n(8022),i=n(2414),r=n(6280),a=n(2424),l=n(6769);let P=(()=>{class h{constructor(v,p,f,D,T,F,L){this.activatedRoute=v,this.router=p,this.beltCollectionService=f,this.beltAuditoryService=D,this.responseService=T,this.confirmDialogService=F,this.loadingService=L,this.backUrl=(0,e.YB)("0"),this.registrationCount=0,this.auditoryId="0"}ngOnInit(){}ionViewWillEnter(){this.activatedRoute.paramMap.subscribe({next:v=>{this.auditoryId=v.get("id")||"0","0"!==(v.get("from")||"0")&&(this.backUrl=(0,e.lM)("local")),this.beltCollectionService.getCount(this.auditoryId).subscribe({next:f=>{f!==s.W&&(this.registrationCount=f.values[0].total)},error:f=>{this.responseService.onError(f,"No se pudo guardar el conteo")}})}}).unsubscribe()}openCountForm(){this.router.navigateByUrl((0,e.KC)(this.auditoryId))}onOpenList(){this.router.navigateByUrl((0,e.$)(this.auditoryId))}onReturn(){this.router.navigateByUrl(this.backUrl)}onFinish(){this.confirmDialogService.presentAlert("\xbfDesea terminar el registro?",()=>{this.loadingService.showLoading(),this.beltAuditoryService.finishAuditory(this.auditoryId).subscribe({next:v=>{v!==s.W&&(this.loadingService.dismissLoading(),this.responseService.onSuccessAndRedirect((0,e.lM)("local"),"Registro terminado"))},error:v=>{this.responseService.onError(v,"No se pudo actualizar")}})})}}return h.\u0275fac=function(v){return new(v||h)(o.Y36(y.gz),o.Y36(y.F0),o.Y36(g.P),o.Y36(u.E),o.Y36(i.J),o.Y36(r.D),o.Y36(a.b))},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-belt-collection-data"]],decls:29,vars:2,consts:[["homeUrl","/home",3,"backUrl"],[1,"mx-2","mt-4"],[1,"row"],[1,"col-6","p-4","pe-2"],[1,"card","ion-button","bg-primary",3,"click"],[1,"ion-text-center","mt-5","mb-4"],["color","light","size","large","name","clipboard"],[1,"text-light"],[1,"col-6","p-4","ps-2"],[1,"card","button","bg-primary",3,"click"],["color","light","size","large","name","add"],["expand","full","color","danger",3,"click"],["expand","full",3,"click"]],template:function(v,p){1&v&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-header-buttons",0),o.TgZ(2,"div",1)(3,"h1"),o._uU(4,"Total de registros"),o.qZA()(),o.TgZ(5,"div",1)(6,"h1"),o._uU(7),o.qZA()(),o.TgZ(8,"div",2)(9,"div",3)(10,"div",4),o.NdJ("click",function(){return p.onOpenList()}),o.TgZ(11,"div",5),o._UZ(12,"ion-icon",6),o.TgZ(13,"p",7),o._uU(14,"Listado de registros"),o.qZA()()()(),o.TgZ(15,"div",8)(16,"div",9),o.NdJ("click",function(){return p.openCountForm()}),o.TgZ(17,"div",5),o._UZ(18,"ion-icon",10),o.TgZ(19,"p",7),o._uU(20,"Agregar registro"),o.qZA()()()()()(),o.TgZ(21,"ion-footer")(22,"ion-row")(23,"ion-col")(24,"ion-button",11),o.NdJ("click",function(){return p.onReturn()}),o._uU(25,"SALIR"),o.qZA()(),o.TgZ(26,"ion-col")(27,"ion-button",12),o.NdJ("click",function(){return p.onFinish()}),o._uU(28,"FINALIZAR"),o.qZA()()()()),2&v&&(o.xp6(1),o.Q6J("backUrl",p.backUrl),o.xp6(6),o.Oqu(p.registrationCount))},dependencies:[c.YG,c.wI,c.W2,c.fr,c.gu,c.Nd,l.$],encapsulation:2}),h})();var C=n(1576);const E=[{path:"",component:P}];let U=(()=>{class h{}return h.\u0275fac=function(v){return new(v||h)},h.\u0275mod=o.oAB({type:h}),h.\u0275inj=o.cJS({imports:[t.ez,d.u5,c.Pc,y.Bz.forChild(E),C.Y]}),h})()}}]);